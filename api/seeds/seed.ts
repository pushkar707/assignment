import mongoose from "mongoose"
import Post from "../models/Post"
import Tag from "../models/Tag"
import blogtitles from "./blogtitles"
import images from "./images"
require('dotenv').config();

const parentDesc = "Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt autem consequatur vero dolorum, aspernatur sunt. Autem ad sapiente laudantium amet, fuga, nihil eos voluptatibus voluptatum laboriosam non explicabo! Optio, blanditiis? Omnis tempora non consectetur sequi. Expedita inventore ipsa sint debitis hic illum repellendus autem fuga ut minima itaque accusamus deserunt earum similique soluta reiciendis possimus quo vero sit voluptates minus, eaque magnam! Eligendi cupiditate mollitia dolores itaque odit enim vel saepe eum, dolore debitis quaerat possimus laudantium culpa sed et exercitationem, eius quo, sapiente deserunt vitae. Aspernatur, fugit laudantium! Nesciunt quam a, tempore perferendis ea omnis quae deserunt blanditiis architecto recusandae perspiciatis. Necessitatibus aperiam voluptatum suscipit expedita odio! Harum, natus rem, autem qui sint accusamus delectus quia quis cupiditate impedit, ratione excepturi modi blanditiis adipisci. Nobis non harum nesciunt a corrupti quos recusandae sint voluptatum cum aspernatur reprehenderit nisi beatae porro facere veniam quo atque consequatur, possimus iusto quae deserunt ut. Nostrum at odit laborum! Velit aliquam perferendis dolores, iure rem excepturi voluptas quibusdam totam praesentium quo. Dolor in culpa recusandae voluptatem perspiciatis placeat fugit voluptates ex! Cupiditate obcaecati magnam incidunt odit placeat eaque hic, officia dolor velit consequuntur maiores similique iure soluta asperiores ducimus accusantium facere minima laboriosam commodi modi harum, quo temporibus praesentium cumque? Dolorem tempore cupiditate veritatis consequatur praesentium, voluptatum reiciendis earum minus facere dolor blanditiis porro asperiores tempora cumque sit laborum fuga aut dolorum. Placeat iste accusantium deleniti doloribus, voluptas, aspernatur fuga quam earum incidunt ab, illo neque id laudantium dolorem. Mollitia iste officia natus nostrum nisi dolorum ipsam eaque quas obcaecati earum culpa, explicabo velit maxime amet tempora et quam corrupti minus sequi doloribus eveniet? Deserunt quibusdam dolorum quasi repudiandae exercitationem maxime. Dolorem, architecto inventore animi ex reprehenderit ratione, distinctio voluptatem deleniti vel ullam ab illo iure voluptatibus sunt repellendus facere amet pariatur repellat molestias aliquam quibusdam quasi reiciendis. Esse harum voluptatem voluptate quas dolores dolorum! Dolores dignissimos doloremque omnis fugit eligendi sit hic, libero ipsa non, fugiat totam enim dolore temporibus officia consequatur alias unde praesentium natus tempora beatae quo? Ducimus, doloribus laborum. Obcaecati voluptates quas quia tenetur, hic libero minima repellat. Dolores deleniti ipsa ea sed dicta velit voluptas repudiandae, officia corrupti neque aliquid voluptatibus quaerat nam quod numquam facilis? Officiis architecto similique consequatur doloremque minima, ullam dicta pariatur assumenda obcaecati dolore reprehenderit illum delectus quidem consequuntur repellendus fuga, provident hic atque quo deleniti sed. Praesentium quas dolore dolor provident eaque cumque dolorum repellat? Adipisci at harum voluptatibus sed quisquam consequuntur dolorem, veritatis error labore explicabo quidem accusamus dolore cupiditate veniam eaque asperiores reiciendis, quae dolor tempore facere. Tenetur ipsa, illum accusamus ab magnam doloribus neque nam corrupti quia molestias commodi temporibus ut labore iste inventore veritatis aliquam? Tempore ad commodi, adipisci similique impedit quibusdam numquam, omnis enim dolores a, facere suscipit aliquam molestias excepturi vero incidunt! Nulla voluptas consectetur quasi delectus eos rem reiciendis laudantium odio quae officia. Quo vel alias dolore in, sit laboriosam pariatur est excepturi quaerat ducimus, perspiciatis magnam. Laudantium officia vero quasi nostrum ab exercitationem, enim rerum unde, doloribus maxime officiis, alias quas mollitia error voluptates labore nam eveniet harum voluptatum nesciunt velit architecto eligendi. Rerum veniam a quidem omnis fugit quibusdam illo tempora inventore iste nihil eligendi, dolor in odit soluta impedit, hic reprehenderit autem optio laborum mollitia beatae commodi sunt tempore? Consequuntur pariatur temporibus aliquid ullam consectetur nesciunt voluptate error nemo veniam optio quis reprehenderit impedit iste vel odit, vero cumque suscipit amet accusamus illo culpa explicabo. Facere, praesentium quaerat omnis alias sint pariatur totam saepe excepturi nesciunt sequi odio magnam esse minima non culpa, vel deleniti. Optio dicta, molestiae ipsa eos, doloribus magni impedit animi reprehenderit ipsum, vel quisquam? Modi nesciunt praesentium voluptas aperiam iste soluta dolorem tenetur atque aspernatur impedit corporis, placeat dolores deleniti sapiente, eligendi illum perferendis fuga dolore. Modi quod qui ducimus nihil ab soluta? Voluptatem odit quidem nihil laudantium quae libero non architecto reprehenderit soluta dolore in inventore eos sapiente voluptatibus, assumenda expedita, natus nemo numquam modi reiciendis odio iure amet quos officiis! Voluptatem sed eos reiciendis possimus totam soluta dicta officia voluptates minima itaque fugiat magnam ullam qui voluptate, incidunt, quod illo mollitia eligendi reprehenderit. Ut iure corrupti maxime ratione aperiam adipisci earum qui ducimus reprehenderit nihil quae deleniti culpa quis quo rerum provident, saepe dolores cumque expedita sint pariatur corporis perspiciatis officia. Excepturi pariatur et magni illo quos, amet eaque in accusamus, non dolorum atque, reiciendis neque? Nam necessitatibus expedita dolores itaque laudantium magni? Cupiditate id, culpa, quis veniam voluptatibus consectetur sunt adipisci beatae asperiores amet nisi eligendi hic obcaecati similique, mollitia labore itaque nostrum quas. Sed debitis consectetur ab, aliquid assumenda tenetur labore neque. Obcaecati iusto porro dolorum molestiae quo fugit eaque magni iste enim, maxime incidunt quos, aliquam inventore. Reprehenderit tempora voluptates laborum dolorem optio maxime architecto error quaerat aperiam, eveniet delectus sapiente itaque vitae fugiat distinctio. Sunt mollitia maiores sit facilis provident doloribus aliquam repellendus reprehenderit omnis quisquam amet molestias magnam distinctio fugit deserunt, quod delectus eligendi nihil modi debitis tempora odio? Ex molestias cum nam iste iusto eveniet beatae! Sequi sapiente assumenda amet magni iusto consequuntur omnis eius dolores eveniet fugiat, neque tenetur ex placeat! Odit aliquid impedit inventore ducimus illo maiores necessitatibus iusto. Perferendis repellendus cupiditate cumque quos possimus officia reiciendis accusantium delectus. Accusamus quis consequatur odit atque consequuntur, iure sit neque nulla quasi suscipit at vero laboriosam nobis officiis fuga. Odit magnam quasi nobis. Perferendis iusto obcaecati voluptatum veniam sit, numquam pariatur voluptas unde temporibus aliquam doloribus non accusamus dolorem incidunt nihil autem assumenda placeat minus, officia omnis quisquam illum dolorum id? Rem, quo libero. Ex laborum, iure dolores necessitatibus saepe voluptatem minima molestias tempore error, delectus modi dicta beatae sequi maiores! Vero tenetur reiciendis assumenda esse ab! Suscipit incidunt consectetur earum? Optio iusto facere, culpa dolorem quasi cumque eos perspiciatis minus quod sit alias pariatur nihil magnam hic perferendis! Voluptates fuga vel sed? Ea quos incidunt unde voluptatum asperiores labore quia cumque eveniet deleniti rem, voluptatibus esse iusto accusamus corporis, reiciendis dolor quasi. Cupiditate, cum culpa in commodi unde a aut veniam."

mongoose.connect(process.env.MONGO_DB_URI || "")
.then(() => {
    console.log("Connected to mongoose");
}).catch((e:Error) => {
    console.log("Could not connect to the database"); 
})

const addPosts = async () => {
    const tags = await Tag.find({})
    const tagNames:string[] = []
    tags.forEach(tag => tagNames.push(tag.tagName))

    for (let i=0; i<40; i++){
        const tag1 = tagNames[i%5];
        const tag2 = tagNames[(i%5)+1]
        const title = blogtitles[i%25]
        const desc = parentDesc.slice(parentDesc.length/(i+50),parentDesc.length/(i+1))
        
        const imageKey = images[i%8]
        const post = await Post.create({title,desc, tags:[tag1,tag2],imageKey})
        await Tag.findOneAndUpdate({tagName:tag1},{$push:{posts:post.id}})
        await Tag.findOneAndUpdate({tagName:tag2},{$push:{posts:post.id}})
    }
    process.exit()
}
addPosts()